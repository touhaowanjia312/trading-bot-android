# 🚀 Android应用快速构建指南

## 📋 前置要求

### 必需软件
- Python 3.8+ 
- Git
- 至少10GB可用磁盘空间
- 稳定的网络连接

### 推荐环境
- **Linux** (Ubuntu 20.04+) - 最佳选择
- **macOS** (10.15+) - 良好支持  
- **Windows** (10/11) - 需要额外配置

## ⚡ 一键构建 (Linux/macOS)

```bash
# 1. 克隆或下载项目到本地

# 2. 进入项目目录
cd project1

# 3. 给构建脚本执行权限
chmod +x build_android_app.sh

# 4. 运行完整构建
./build_android_app.sh -f

# 5. 构建完成后安装到设备 (可选)
./build_android_app.sh -i
```

## 🪟 Windows用户

```cmd
# 1. 进入项目目录
cd project1

# 2. 运行构建脚本
build_android_app.bat

# 3. 按照提示完成构建
```

## 📱 手动构建步骤

如果自动脚本失败，可以手动执行：

### 1. 安装依赖
```bash
# 安装Python包
pip install buildozer cython kivy[base]==2.1.0

# 安装项目依赖
pip install -r requirements_mobile.txt
```

### 2. 配置Android SDK
```bash
# 设置环境变量
export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools

# 下载SDK (Linux)
mkdir -p $ANDROID_HOME && cd $ANDROID_HOME
wget https://dl.google.com/android/repository/commandlinetools-linux-9477386_latest.zip
unzip commandlinetools-linux-9477386_latest.zip
mv cmdline-tools latest && mkdir cmdline-tools && mv latest cmdline-tools/

# 安装SDK组件
yes | $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager --licenses
$ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "platforms;android-33"
$ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "build-tools;33.0.0"
$ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "ndk;25.2.9519653"
```

### 3. 构建APK
```bash
# 初始化buildozer (如果需要)
buildozer init

# 构建调试版APK
buildozer android debug
```

### 4. 安装到设备
```bash
# 连接Android设备并开启USB调试
adb devices

# 安装APK
adb install bin/tradingbot-*-debug.apk
```

## 🔧 故障排除

### 常见问题

1. **构建时间过长**
   - 首次构建需要下载大量依赖，正常需要30-90分钟
   - 确保网络连接稳定

2. **磁盘空间不足**
   - 确保至少有10GB可用空间
   - 构建完成后可以删除.buildozer目录节省空间

3. **网络连接问题**
   - 使用稳定的网络连接
   - 考虑使用VPN或更换网络

4. **权限问题** (Linux)
   ```bash
   # 给予脚本执行权限
   chmod +x build_android_app.sh
   
   # 如果需要sudo权限安装系统包
   sudo apt update && sudo apt install -y git zip unzip openjdk-8-jdk
   ```

5. **Python版本问题**
   ```bash
   # 检查Python版本
   python3 --version
   
   # 如果版本过低，升级Python
   sudo apt install python3.9 python3.9-pip
   ```

### Windows特殊问题

1. **环境变量设置**
   - 手动设置ANDROID_HOME指向SDK目录
   - 将SDK的tools和platform-tools添加到PATH

2. **Java环境**
   - 安装JDK 8 (不是JRE)
   - 设置JAVA_HOME环境变量

3. **长路径问题**
   - 确保项目路径不要太深
   - 避免路径中包含中文字符

## 📊 构建时间预估

| 环境 | 首次构建 | 后续构建 |
|------|----------|----------|
| Linux (推荐) | 30-60分钟 | 5-15分钟 |
| macOS | 45-75分钟 | 8-20分钟 |
| Windows | 60-90分钟 | 10-25分钟 |

## 🎯 构建成功标志

构建成功后，您会看到：
- ✅ APK文件生成在 `bin/` 目录
- 📱 文件名类似 `tradingbot-1.0-debug.apk`
- 📏 APK大小约20-50MB

## 📱 安装和使用

1. **安装APK**
   - 将APK传输到Android设备
   - 允许"未知来源"安装
   - 点击APK文件安装

2. **首次运行**
   - 授权所需权限
   - 关闭电池优化限制
   - 配置API密钥

3. **开始使用**
   - 检查连接状态
   - 开启自动交易
   - 监控交易执行

## 🆘 获取帮助

如果遇到问题：
1. 查看构建日志中的错误信息
2. 检查网络连接和磁盘空间
3. 尝试重新运行构建脚本
4. 考虑使用不同的网络环境

---

**🎉 祝您构建成功！现在您可以在手机上随时监控交易了！**
